import{R as k,j as e,u as p,a as w,r as j,Q as o,B as y}from"./index-Ck4Mj6hj.js";import{C as $,a as C}from"./Card-SKlqbuTj.js";function E({name:m,legend:n,value:a,onChange:d}){const x=k.useId(),c=Array.from({length:7},(r,i)=>i+1),t=`${m}-${x}`;return e.jsxs("fieldset",{className:"space-y-6",children:[e.jsx("legend",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 leading-relaxed",children:n}),e.jsxs("div",{className:"flex items-center justify-between text-sm font-medium text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"text-left",children:"全く違う"}),e.jsx("span",{className:"text-right",children:"全くそのとおりである"})]}),e.jsx("div",{className:"flex items-center justify-between gap-2 px-2",role:"radiogroup","aria-label":n,children:c.map(r=>e.jsxs("label",{className:`flex flex-col items-center gap-2 cursor-pointer group transition-transform hover:scale-110 ${a===r?"scale-110":""}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"sr-only",type:"radio",name:t,value:r,checked:a===r,onChange:()=>d(r),"aria-checked":a===r}),e.jsx("div",{className:`
                h-8 w-8 rounded-full border-2 transition-all duration-200 ease-in-out
                ${a===r?"bg-blue-600 border-blue-600 ring-4 ring-blue-200 dark:ring-blue-800":"border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500 group-hover:bg-blue-50 dark:group-hover:bg-blue-900/30"}
              `,children:a===r&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 rounded-full bg-white"})})})]}),e.jsx("span",{className:`
              text-sm font-medium transition-colors
              ${a===r?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400"}
            `,children:r})]},r))}),a>0&&e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:["選択: ",a]})})]})}function D({value:m,label:n,showPercentage:a=!1,color:d="blue",size:x="md"}){const c=Math.max(0,Math.min(100,m)),t={blue:"bg-blue-600 dark:bg-blue-500",green:"bg-green-600 dark:bg-green-500",red:"bg-red-600 dark:bg-red-500",yellow:"bg-yellow-600 dark:bg-yellow-500"},r={sm:"h-1",md:"h-2",lg:"h-3"};return e.jsxs("div",{className:"w-full",children:[(n||a)&&e.jsxs("div",{className:"mb-2 flex items-center justify-between text-sm",children:[n&&e.jsx("span",{className:"text-gray-600 dark:text-gray-300 font-medium",children:n}),a&&e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 tabular-nums",children:[c,"%"]})]}),e.jsx("div",{className:`w-full rounded-full bg-gray-200 dark:bg-gray-800 overflow-hidden ${r[x]}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":c,"aria-label":n||`進捗: ${c}%`,children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ease-out ${t[d]}`,style:{width:`${c}%`},children:e.jsx("div",{className:"h-full w-full bg-gradient-to-r from-transparent to-white/20"})})})]})}function I(){const m=p(),{state:n,setAnswer:a,allAnswered:d,answeredCount:x,compute:c}=w(),[t,r]=j.useState(0),i=o[t],b=j.useMemo(()=>{var l;return((l=n.answers.find(s=>s.questionId===i.id))==null?void 0:l.value)??0},[n.answers,i.id]),g=()=>{t<o.length-1&&r(l=>l+1)},h=()=>{t>0&&r(l=>l-1)},f=()=>{d&&(c(),m("/results"))},N=Math.round(x/o.length*100),u=t===o.length-1;return j.useEffect(()=>{const l=s=>{s.key>="1"&&s.key<="7"?(s.preventDefault(),a(i.id,parseInt(s.key))):s.key==="ArrowLeft"&&t>0?(s.preventDefault(),h()):s.key==="ArrowRight"&&t<o.length-1&&b>0?(s.preventDefault(),g()):s.key==="Enter"&&u&&d&&(s.preventDefault(),f())};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[t,b,d,u,i.id,a,g,h,f]),e.jsx("main",{className:"container py-8",children:e.jsxs("div",{className:"mx-auto max-w-2xl",children:[e.jsxs("header",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"診断"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"6つの質問に1〜7のスケールで回答してください。"})]}),e.jsx("div",{className:"mb-8",children:e.jsx(D,{value:N,label:`回答状況: ${x}/${o.length}`,showPercentage:!0,color:d?"green":"blue",size:"lg"})}),e.jsx($,{className:"mb-8",children:e.jsxs(C,{className:"pt-8",children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-400 font-semibold text-sm mb-4",children:i.id}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:["質問 ",t+1," / ",o.length]})]}),e.jsx(E,{name:`q-${i.id}`,legend:i.text,value:b,onChange:l=>a(i.id,l)}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/30 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-300 font-medium mb-1",children:"⌨️ キーボードショートカット"}),e.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 space-y-1",children:[e.jsx("div",{children:"数字キー 1-7: 回答選択"}),e.jsx("div",{children:"←→ 矢印キー: 質問の移動"}),u&&d&&e.jsx("div",{children:"Enter: 診断完了"})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx(y,{variant:"secondary",onClick:h,disabled:t===0,"aria-label":"前へ",className:"flex items-center gap-2",children:"← 前へ"}),e.jsx("div",{className:"flex gap-2",children:o.map((l,s)=>{var v;return e.jsx("button",{onClick:()=>r(s),className:`w-3 h-3 rounded-full transition-colors ${s===t?"bg-blue-600 dark:bg-blue-500":((v=n.answers[s])==null?void 0:v.value)>0?"bg-green-400 dark:bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,"aria-label":`質問 ${s+1} に移動`},s)})}),!u&&e.jsx(y,{onClick:g,disabled:b===0,"aria-label":"次へ",className:"flex items-center gap-2",children:"次へ →"}),u&&e.jsx(y,{variant:"success",onClick:f,disabled:!d,"aria-label":"診断結果を見る",className:"flex items-center gap-2",children:"診断結果を見る ✓"})]}),!d&&u&&e.jsx("div",{className:"mt-6 p-4 rounded-lg bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 text-center",role:"alert",children:"未回答の質問があります。すべて回答してください。"})})]})})}export{I as default};
