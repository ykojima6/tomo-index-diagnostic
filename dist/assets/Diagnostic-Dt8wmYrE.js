import{R as N,j as e,u as w,a as y,r as f,Q as o,B as v}from"./index-DPgD9II7.js";function $({name:u,legend:d,value:a,onChange:c}){const x=N.useId(),i=Array.from({length:7},(r,n)=>n+1),t=`${u}-${x}`;return e.jsxs("fieldset",{className:"space-y-6",children:[e.jsx("legend",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 leading-relaxed",children:d}),e.jsxs("div",{className:"flex items-center justify-between text-sm font-medium text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"text-left",children:"全く違う"}),e.jsx("span",{className:"text-right",children:"全くそのとおりである"})]}),e.jsx("div",{className:"flex items-center justify-between gap-2 px-2",role:"radiogroup","aria-label":d,children:i.map(r=>e.jsxs("label",{className:`flex flex-col items-center gap-2 cursor-pointer group transition-transform hover:scale-110 ${a===r?"scale-110":""}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"sr-only",type:"radio",name:t,value:r,checked:a===r,onChange:()=>c(r),"aria-checked":a===r}),e.jsx("div",{className:`
                h-8 w-8 rounded-full border-2 transition-all duration-200 ease-in-out
                ${a===r?"bg-blue-600 border-blue-600 ring-4 ring-blue-200 dark:ring-blue-800":"border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500 group-hover:bg-blue-50 dark:group-hover:bg-blue-900/30"}
              `,children:a===r&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 rounded-full bg-white"})})})]}),e.jsx("span",{className:`
              text-sm font-medium transition-colors
              ${a===r?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400"}
            `,children:r})]},r))}),a>0&&e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200",children:["選択: ",a]})})]})}function L({value:u,label:d,showPercentage:a=!1,color:c="blue",size:x="md"}){const i=Math.max(0,Math.min(100,u)),t={blue:"bg-blue-600 dark:bg-blue-500",green:"bg-green-600 dark:bg-green-500",red:"bg-red-600 dark:bg-red-500",yellow:"bg-yellow-600 dark:bg-yellow-500"},r={sm:"h-1",md:"h-2",lg:"h-3"};return e.jsxs("div",{className:"w-full",children:[(d||a)&&e.jsxs("div",{className:"mb-2 flex items-center justify-between text-sm",children:[d&&e.jsx("span",{className:"text-gray-600 dark:text-gray-300 font-medium",children:d}),a&&e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 tabular-nums",children:[i,"%"]})]}),e.jsx("div",{className:`w-full rounded-full bg-gray-200 dark:bg-gray-800 overflow-hidden ${r[x]}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":i,"aria-label":d||`進捗: ${i}%`,children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ease-out ${t[c]}`,style:{width:`${i}%`},children:e.jsx("div",{className:"h-full w-full bg-gradient-to-r from-transparent to-white/20"})})})]})}function E(){const u=w(),{state:d,setAnswer:a,allAnswered:c,answeredCount:x,compute:i}=y(),[t,r]=f.useState(0),n=o[t],p=f.useMemo(()=>{var l;return((l=d.answers.find(s=>s.questionId===n.id))==null?void 0:l.value)??0},[d.answers,n.id]),b=()=>{t<o.length-1&&r(l=>l+1)},h=()=>{t>0&&r(l=>l-1)},g=()=>{c&&(i(),u("/results"))},k=Math.round(x/o.length*100),m=t===o.length-1;return f.useEffect(()=>{const l=s=>{s.key>="1"&&s.key<="7"?(s.preventDefault(),a(n.id,parseInt(s.key))):s.key==="ArrowLeft"&&t>0?(s.preventDefault(),h()):s.key==="ArrowRight"&&t<o.length-1?(s.preventDefault(),b()):s.key==="Enter"&&m&&(s.preventDefault(),g())};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[t,p,c,m,n.id,a,b,h,g]),e.jsxs("main",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-blue-900/50 dark:to-indigo-900/50",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-20 right-10 w-64 h-64 bg-gradient-to-br from-blue-400/10 to-purple-400/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-20 left-10 w-80 h-80 bg-gradient-to-tr from-indigo-400/8 to-pink-400/8 rounded-full blur-3xl"})]}),e.jsx("div",{className:"container relative py-8",children:e.jsxs("div",{className:"mx-auto max-w-3xl",children:[e.jsxs("header",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"ToMo指数診断"}),e.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-300",children:"6つの質問に1〜7のスケールで回答してください"})]}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"relative overflow-hidden rounded-xl bg-white/70 dark:bg-slate-800/70 backdrop-blur-sm border border-slate-200/50 dark:border-slate-700/50 p-6 shadow-lg",children:e.jsx(L,{value:k,label:`回答状況: ${x}/${o.length}`,showPercentage:!0,color:c?"green":"blue",size:"lg"})})}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm border border-slate-200/50 dark:border-slate-700/50 shadow-xl",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16"}),e.jsxs("div",{className:"relative text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-white/20 backdrop-blur-sm mb-4 font-bold text-lg",children:n.id}),e.jsxs("div",{className:"text-sm opacity-90 mb-2",children:["質問 ",t+1," / ",o.length]})]})]}),e.jsxs("div",{className:"p-8",children:[e.jsx($,{name:`q-${n.id}`,legend:n.text,value:p,onChange:l=>a(n.id,l)}),e.jsxs("div",{className:"mt-6 p-4 bg-slate-100/70 dark:bg-slate-700/50 backdrop-blur-sm rounded-xl border border-slate-200/50 dark:border-slate-600/50",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-300 font-medium mb-2",children:[e.jsx("span",{className:"text-lg",children:"⌨️"}),"キーボードショートカット"]}),e.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"px-2 py-1 bg-white dark:bg-slate-800 rounded border text-xs",children:"1-7"}),e.jsx("span",{children:"回答選択"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"px-2 py-1 bg-white dark:bg-slate-800 rounded border text-xs",children:"← →"}),e.jsx("span",{children:"質問の移動"})]}),m&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("kbd",{className:"px-2 py-1 bg-white dark:bg-slate-800 rounded border text-xs",children:"Enter"}),e.jsx("span",{children:"診断完了"})]})]})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"flex gap-3 p-3 bg-white/70 dark:bg-slate-800/70 backdrop-blur-sm rounded-full border border-slate-200/50 dark:border-slate-700/50 shadow-lg",children:o.map((l,s)=>{var j;return e.jsx("button",{onClick:()=>r(s),className:`w-4 h-4 rounded-full transition-all duration-300 ${s===t?"bg-gradient-to-r from-blue-600 to-purple-600 scale-125 shadow-lg":((j=d.answers[s])==null?void 0:j.value)!==4?"bg-gradient-to-r from-green-500 to-emerald-500 hover:scale-110":"bg-slate-300 dark:bg-slate-600 hover:bg-slate-400 dark:hover:bg-slate-500 hover:scale-110"}`,"aria-label":`質問 ${s+1} に移動`},s)})})}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs(v,{variant:"secondary",onClick:h,disabled:t===0,"aria-label":"前へ",className:"flex items-center gap-2 bg-white/70 dark:bg-slate-800/70 backdrop-blur-sm border border-slate-200/50 dark:border-slate-700/50 hover:bg-white dark:hover:bg-slate-800",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"前へ"]}),!m&&e.jsxs(v,{onClick:b,disabled:!1,"aria-label":"次へ",className:"flex items-center gap-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:["次へ",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),m&&e.jsxs(v,{variant:"success",onClick:g,disabled:!1,"aria-label":"診断結果を見る",className:"flex items-center gap-2 bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-700 hover:to-green-700",children:["診断結果を見る",e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})]})]})]})})]})}export{E as default};
