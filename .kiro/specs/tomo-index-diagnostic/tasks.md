# 実装計画

- [ ] 1. プロジェクト基盤とコア機能の設定
  - React + TypeScript + Viteプロジェクトの初期化
  - 基本的なディレクトリ構造とファイル構成の作成
  - 必要な依存関係のインストール（Tailwind CSS、React Router、Chart.js等）
  - TypeScript型定義ファイルの作成
  - _要件: 6.1, 6.5_

- [ ] 2. データモデルとスコア計算ロジックの実装
- [ ] 2.1 質問データと型定義の作成
  - 6つの質問データの定数定義
  - DiagnosticAnswer、DiagnosticResult等の型定義
  - 質問の重み付け設定
  - _要件: 4.1, 4.2_

- [ ] 2.2 スコア計算エンジンの実装
  - calculateScore関数の実装
  - ポジティブ/ネガティブ要因の分離計算
  - 小数第2位での四捨五入処理
  - スコア帯別コメント生成機能
  - _要件: 4.1, 4.2, 4.3, 4.4, 4.5, 3.4_

- [ ] 2.3 スコア計算ロジックの単体テスト
  - 最高スコア（+99.96）のテストケース
  - 最低スコア（-99.96）のテストケース
  - 中立スコア（0.0）のテストケース
  - 各質問の重み付け検証テスト
  - _要件: 4.1, 4.2, 4.3_

- [ ] 3. 基本UIコンポーネントの実装
- [ ] 3.1 共通UIコンポーネントの作成
  - Button、Card、Progressコンポーネント
  - レスポンシブ対応とTailwind CSSスタイリング
  - アクセシビリティ属性の実装
  - _要件: 6.1, 6.2_

- [ ] 3.2 質問入力コンポーネントの実装
  - QuestionScaleコンポーネント（1-7スケール）
  - ラジオボタンまたはスライダーUI
  - 「全く違う」「全くそのとおりである」ラベル表示
  - キーボードナビゲーション対応
  - _要件: 2.2, 2.3, 6.2, 6.5_

- [ ] 3.3 チャートコンポーネントの実装
  - ScoreChartコンポーネント（棒グラフ）
  - ポジティブ/ネガティブ要因の視覚化
  - 各質問寄与度の表示機能
  - レスポンシブ対応とアクセシビリティ
  - _要件: 3.2, 3.3, 6.1, 6.2_

- [ ] 4. ページコンポーネントの実装
- [ ] 4.1 ランディングページの作成
  - 診断説明セクション
  - 利用方法と注意点の表示
  - 「診断を始める」ボタン
  - レスポンシブレイアウト
  - _要件: 1.1, 1.2, 1.3, 1.4_

- [ ] 4.2 診断ページの実装
  - 6つの質問の順次表示機能
  - 進行状況インジケーター
  - 回答状態の管理
  - 「診断結果を見る」ボタンの制御
  - _要件: 2.1, 2.4, 2.5_

- [ ] 4.3 結果ページの実装
  - 総合スコアの数値表示
  - ポジティブ/ネガティブ要因のグラフ表示
  - 各質問寄与度のグラフ表示
  - スコア帯別コメント表示
  - 再診断・共有ボタン
  - _要件: 3.1, 3.2, 3.3, 3.4, 3.5_

- [ ] 5. 状態管理とナビゲーションの実装
- [ ] 5.1 アプリケーション状態管理
  - React ContextとuseReducerによる状態管理
  - 診断回答データの保持
  - ページ間でのデータ受け渡し
  - _要件: 2.4, 2.5_

- [ ] 5.2 ルーティング設定
  - React Routerによるページ遷移
  - ランディング → 診断 → 結果のフロー
  - ブラウザ履歴の適切な管理
  - _要件: 1.3, 2.5, 3.5_

- [ ] 6. バリデーションとエラーハンドリング
- [ ] 6.1 入力バリデーションの実装
  - 未回答質問の検出機能
  - リアルタイムバリデーション
  - エラーメッセージ表示
  - 進行ブロック機能
  - _要件: 2.4, 2.6, 5.1_

- [ ] 6.2 エラーハンドリングシステム
  - ErrorBoundaryコンポーネント
  - スコア計算エラーの処理
  - 「診断結果を表示できません」エラー表示
  - エラー復旧機能
  - _要件: 5.2, 5.3, 5.4_

- [ ] 7. 結果共有機能の実装
- [ ] 7.1 署名トークンシステム
  - HMAC-SHA256による署名生成
  - タイムスタンプ付きトークン作成
  - URL生成とエンコード処理
  - _要件: 7.1, 7.2, 6.4_

- [ ] 7.2 共有URL検証機能
  - 署名検証ロジック
  - タイムスタンプ有効性チェック
  - 改ざん検出とエラー処理
  - 共有結果の表示機能
  - _要件: 7.3, 7.4_

- [ ] 8. アクセシビリティ対応の強化
- [ ] 8.1 ARIA属性とセマンティックHTML
  - 適切なrole、aria-label属性の追加
  - fieldset/legendによる質問グループ化
  - スクリーンリーダー対応テキスト
  - _要件: 6.2_

- [ ] 8.2 キーボードナビゲーション
  - Tab順序の最適化
  - フォーカス管理の実装
  - キーボードショートカット対応
  - フォーカスインジケーターの視覚化
  - _要件: 6.2, 6.5_

- [ ] 9. テストの実装
- [ ] 9.1 コンポーネントテスト
  - React Testing Libraryによるコンポーネントテスト
  - ユーザーインタラクションのテスト
  - アクセシビリティテスト
  - _要件: 全要件のテスト検証_

- [ ] 9.2 統合テスト
  - ページ間遷移のテスト
  - データフローの検証
  - エラーハンドリングのテスト
  - _要件: 全要件の統合検証_

- [ ] 10. パフォーマンス最適化とデプロイ準備
- [ ] 10.1 パフォーマンス最適化
  - コード分割とlazy loading
  - バンドルサイズの最適化
  - React.memoとuseMemoの適用
  - _要件: 6.3_

- [ ] 10.2 ビルド設定とデプロイ準備
  - Viteビルド設定の最適化
  - 環境変数の設定
  - 静的ファイル生成の確認
  - デプロイメント用設定ファイル作成
  - _要件: 6.4_