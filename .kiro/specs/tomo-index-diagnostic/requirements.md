# 要件定義書

## 概要

ToMo指数診断サイトは、従業員の動機づけ状態をポジティブ要因とネガティブ要因に分けて分析し、総合的な評価を行うWebベースの診断ツールです。6つの質問を1-7のスケールで回答してもらい、-100から+100の範囲でスコアを算出し、グラフや個別のコメントを通じて視覚的なフィードバックを提供します。

## 要件

### 要件1

**ユーザーストーリー:** ユーザーとして、診断ツールの説明が記載されたランディングページにアクセスしたい。そうすることで、この診断が何を測定するのか、どのように使用するのかを理解できる。

#### 受入基準

1. ユーザーがサイトを訪問した時、システムは診断の説明を含むランディングページを表示する
2. ユーザーがランディングページを閲覧した時、システムは利用方法と注意点を表示する
3. ユーザーが開始準備ができた時、システムは「診断を始める」ボタンを提供する
4. ランディングページが読み込まれた時、システムはモバイルからデスクトップまでレスポンシブ対応する

### 要件2

**ユーザーストーリー:** ユーザーとして、明確な評価スケールを持つ6つの質問からなる診断を完了したい。そうすることで、自分の仕事への動機について正確な回答を提供できる。

#### 受入基準

1. ユーザーが診断を開始した時、システムは質問を順番に表示する
2. ユーザーが各質問を閲覧した時、システムはラジオボタンまたはスライダーで1-7のスケールを提供する
3. ユーザーがスケールを見た時、システムは左に「全く違う」、右に「全くそのとおりである」を表示する
4. ユーザーが進行しようとした時、システムはすべての質問への回答を必須とする
5. すべての質問に回答された時、システムは「診断結果を見る」ボタンを有効化する
6. もし未回答の質問がある場合、システムは進行を防ぎエラーメッセージを表示する

### 要件3

**ユーザーストーリー:** ユーザーとして、視覚的な表現を含む包括的な診断結果を見たい。そうすることで、自分の動機プロファイルと改善すべき領域を理解できる。

#### 受入基準

1. 結果が計算された時、システムは-100から+100の範囲で総合スコアを数値表示する
2. 結果が表示された時、システムはポジティブ要因とネガティブ要因の合計を棒グラフで表示する
3. 結果が表示された時、システムは各質問の寄与度を棒グラフ形式で表示する
4. スコアが計算された時、システムはスコア範囲に応じた適切なコメントを提供する：
   - +60以上：「非常に良好」
   - +20〜+59：「良好」
   - -19〜+19：「中立」
   - -59〜-20：「低め」
   - -60以下：「要改善」
5. 結果が表示された時、システムは再診断または結果共有のオプションを提供する

### 要件4

**ユーザーストーリー:** ユーザーとして、指定された重み付け計算式を使用して正確に動機スコアを計算してほしい。そうすることで、結果が科学的手法を反映したものになる。

#### 受入基準

1. スコア計算時、システムは以下の重みを適用する：
   - 質問1（仕事の楽しさ）：値 × +10
   - 質問2（重要な目的）：値 × +5
   - 質問3（目標達成）：値 × +1.66
   - 質問4（人を落胆させる）：値 × -1.66
   - 質問5（金銭的損失）：値 × -5
   - 質問6（妥当な理由なし）：値 × -10
2. 総合スコア計算時、システムはすべての重み付け値を合計する
3. 結果表示時、システムは小数第2位まで四捨五入する
4. ポジティブ要因計算時、システムは質問1、2、3の寄与度を合計する
5. ネガティブ要因計算時、システムは質問4、5、6の寄与度を合計する

### 要件5

**ユーザーストーリー:** ユーザーとして、システムがエラーを適切に処理し明確なフィードバックを提供してほしい。そうすることで、問題を理解し診断を正常に完了できる。

#### 受入基準

1. もし未回答の質問がある場合、システムは「未回答あり」エラーメッセージを表示し結果計算を防ぐ
2. もしスコア計算が失敗した場合、システムは「診断結果を表示できません」を表示する
3. エラーが発生した時、システムは問題解決方法について明確なガイダンスを提供する
4. システムが予期しないエラーに遭遇した時、システムはユーザーデータを保持し復旧を可能にする

### 要件6

**ユーザーストーリー:** ユーザーとして、適切なアクセシビリティ機能を持つ任意のデバイスで診断ツールにアクセスしたい。そうすることで、診断がすべての人にとって包括的で使いやすいものになる。

#### 受入基準

1. 任意のデバイスからアクセスした時、システムはモバイルからデスクトップまでレスポンシブデザインを提供する
2. 支援技術を使用した時、システムは適切なARIA属性とラベルを含む
3. システムが回答を処理した時、システムはスコア計算に対して即座に応答する
4. 結果を共有した時、システムは署名トークンを使用してURL改ざん対策を実装する
5. ユーザーがフォーム要素と対話した時、システムはキーボードナビゲーション互換性を確保する

### 要件7

**ユーザーストーリー:** ユーザーとして、診断結果を安全に共有したい。そうすることで、データの整合性を保ちながら同僚や上司と動機プロファイルについて議論できる。

#### 受入基準

1. ユーザーが結果共有を選択した時、システムは安全な共有可能URLを生成する
2. 共有URL生成時、システムは改ざん防止のため署名トークンを実装する
3. 誰かが共有結果にアクセスした時、システムはトークンの整合性を検証する
4. もし共有URLが改ざんされた場合、システムはアクセスを拒否しエラーメッセージを表示する